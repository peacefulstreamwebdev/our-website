{% extends "base.html" %}
{% load static %}

{% block content %}

<main id="main">

<!-- ======= Breadcrumbs ======= -->
<section id="breadcrumbs" class="breadcrumbs">
    <div class="container">
    <div class="d-flex justify-content-between align-items-center">
        <h2>{{ project.name }}</h2>
        <ol>
            <li><a href="{% url 'home' %}">Home</a></li>
            <li>{{ project.name }}</li>
        </ol>
    </div>
    </div>
</section><!-- End Breadcrumbs -->

{% if stages %}

<!-- ======= Stages Section ======= -->
<section id="stages" class="stages skills section-bg">
    <div class="container" data-aos="fade-up">

        <div class="row skills-content stages-content" data-aos="fade-up">
              
            {% for stage in stages %}
            <div class="progress">
            <span class="skill">{{ stage.name }} <i class="val">{{ stage.progress }}%</i></span>
            <div class="progress-bar-wrap">
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ stage.progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ project.progress }}%"></div>
            </div>
            </div>
            {% endfor %}

        </div>

    </div>
</section><!-- End Stages Section -->

<!-- ======= Developer Update Section ======= -->
<section id="services" class="services section-bg">
    <div class="container" data-aos="fade-up">
    
    <div class="section-title">
        <h2>Developer Updates</h2>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-4 col-md-6 d-flex align-items-stretch" data-aos="zoom-in" data-aos-delay="100">
        <div class="icon-box iconbox-blue">
            <div class="icon">
            <svg width="100" height="100" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
                <path stroke="none" stroke-width="0" fill="#f5f5f5" d="M300,582.0697525312426C382.5290701553225,586.8405444964366,449.9789794690241,525.3245884688669,502.5850820975895,461.55621195738473C556.606425686781,396.0723002908107,615.8543463187945,314.28637112970534,586.6730223649479,234.56875336149918C558.9533121215079,158.8439757836574,454.9685369536778,164.00468322053177,381.49747125262974,130.76875717737553C312.15926192815925,99.40240125094834,248.97055460311594,18.661163978235184,179.8680185752513,50.54337015887873C110.5421016452524,82.52863877960104,119.82277516462835,180.83849132639028,109.12597500060166,256.43424936330496C100.08760227029461,320.3096726198365,92.17705696193138,384.0621239912766,124.79988738764834,439.7174275375508C164.83382741302287,508.01625554203684,220.96474134820875,577.5009287672846,300,582.0697525312426"></path>
            </svg>
            <i class="bi bi-chat-dots"></i>
            </div>
            <h4>Latest Developer Update</h4>
            <p>{{ project.last_updated }} EST</p>
            <p class="mt-2">{{ project.latest_update }}</p>
        </div>
        </div>
        <div class="col-lg-4 col-md-6 d-flex align-items-stretch github-column" data-aos="zoom-in" data-aos-delay="100">
        <div class="icon-box iconbox-black">
            <div class="icon">
            <svg width="100" height="100" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
                <path stroke="none" stroke-width="0" fill="#f5f5f5" d="M300,532.3542879108572C369.38199826031484,532.3153073249985,429.10787420159085,491.63046689027357,474.5244479745417,439.17860296908856C522.8885846962883,383.3225815378663,569.1668002868075,314.3205725914397,550.7432151929288,242.7694973846089C532.6665558377875,172.5657663291529,456.2379748765914,142.6223662098291,390.3689995646985,112.34683881706744C326.66090330228417,83.06452184765237,258.84405631176094,53.51806209861945,193.32584062364296,78.48882559362697C121.61183558270385,105.82097193414197,62.805066853699245,167.19869350419734,48.57481801355237,242.6138429142374C34.843463184063346,315.3850353017275,76.69343916112496,383.4422959591041,125.22947124332185,439.3748458443577C170.7312796277747,491.8107796887764,230.57421082200815,532.3932930995766,300,532.3542879108572"></path>
            </svg>
            <i class="bi bi-github"></i>
            </div>
            <h4>Latest Github Commit</h4>
            {% if commit %}
            <p>{{ date }} EST</p>
            <p class="mt-2">{{ commit.commit.message }}</p>
            {% else %}
            <p>{{ project.last_updated}}</p>
            <p class="mt-2">No commits to your Github repository have been made yet, try again later.</p>
            {% endif %}
        </div>
        </div>
    </div>

    </div>
</section><!-- End Developer Update Section -->

{% else %}

<!-- ======= Stages Section ======= -->
<section id="stages" class="stages skills section-bg">
    <div class="container" data-aos="fade-up">

        <div class="row wrapper justify-content-center">
            <img src="{{ MEDIA_URL }}under-construction.png" alt="Project Planning in Progress" style="width: 260px; height: 240px;">
        </div>
        
        <div class="row wrapper justify-content-center">
            <p class="text-center mt-4">Your project is currently in the planning phase, please try again later.</p>
        </div>
    
    </div>
</section><!-- End Stages Section -->

{% endif %}

</main>
{% endblock %}